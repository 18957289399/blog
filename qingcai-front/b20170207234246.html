<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="description" content="15年9月CCF真题4 高速公路">
  <meta name="keywords" content="青菜萝卜 | 个人博客">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <title>青菜萝卜-胡丁 | 程序员技术分享博客</title>
  <meta name="renderer" content="webkit">
  <link rel="shortcut icon" type="image/png" href="static/i/favicon.png">
  <meta http-equiv="Cache-Control" content="no-siteapp"/>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="apple-mobile-web-app-title" content="青菜萝卜"/>
  <meta name="msapplication-TileColor" content="#0e90d2">
  <link rel="stylesheet" href="static/css/amazeui.min.css">
  <link rel="stylesheet" href="static/layui/css/layui.css"/>
  <link rel="stylesheet" href="static/css/qingcai.css"/>
  <link rel="stylesheet" href="http://static.huding.name/editor.md/css/editormd.min.css" />
</head>

<body>
	<header class="am-topbar am-topbar-fixed-top qing-header">
		<div class="am-g am-g-fixed">
		  <h1 class="am-topbar-brand">
	      <a class="qing-logo" href="index.html"></a>
	    </h1>
			<!-- nav start -->
			<nav class="am-g am-g-fixed qing-fixed qing-nav">
				<button class="am-topbar-btn am-topbar-toggle am-btn am-btn-sm am-show-sm-only qing-button" data-am-collapse="{target: '#blog-collapse'}" ><span class="am-sr-only">导航切换</span> <span class="am-icon-bars"></span></button>
			  <div class="am-collapse am-topbar-collapse" id="blog-collapse">
			    <ul class="am-nav am-nav-pills am-topbar-nav">
			      <li><a href="index.html"><i class="am-icon-home"></i> 首页</a></li>
			      <li><a href="about.html"><i class="am-icon-info"></i> 关于本站</a></li>
			      <li><a href="works.html"><i class="am-icon-code"></i> 我的作品</a></li>
			      <li><a href="message.html"><i class="am-icon-paper-plane"></i> 留言墙</a></li>
			      <li><a href="donate.html"><i class="am-icon-share-alt"></i> 赞助作者</a></li>
			    </ul>
			    <form class="am-topbar-form am-topbar-right am-form-inline layui-form am-hide-sm-only" role="search">
			      <div class="am-form-group am-form-icon">
			        <input id="search" name="search" type="text" required lay-verify="required" class="am-form-field am-input-sm am-radius" placeholder="请输入要搜索的关键词">
			        <i class="am-icon-search"></i>
			        <button id="btn-search"  type="button" lay-submit lay-filter="search" class="layui-btn layui-btn-small am-hide-sm-only qing-btn-search">搜索</button>
			      </div>
			    </form>
			  </div>
			</nav>
		</div>
	<!-- nav end -->
	</header>
	<!-- content srart -->
	<div class="am-g am-g-fixed qing-fixed qing-container">
		  <!-- 正文内容开始-->
	    <div class="am-u-md-8 am-u-sm-12">
	    	<!--nav start-->
	    	<div class="qing-blog-nav">
	    		<a href="index.html"><i class="am-icon-home"></i>首页</a> <i class="am-icon-angle-double-right"></i> <a href="/b20170207234246.html">15年9月CCF真题4 高速公路</a>
	    	</div>
	    	<!--nav end-->
	    	<!-- ad start-->
    		<div id="blog-content-top-ad" class="qing-blog-ad qing-margin-top qing-margin-bottom">
    			广告占位
    		</div>
    		<!-- ad start-->
	    	<!--blog start -->
	    	<div class="qing-content">
	    		<!-- blog header start -->
	    		<div class="qing-blog-header qing-text-center">
	    				<input type="hidden" id="qing-blog-id" value="d8f415182fa84602a1e021a4937a22f7" />
	    				<h1 class="am-article-title">15年9月CCF真题4 高速公路</h1>
		          <div class="qing-blog-tips">
					       	<span class="qing-blog-tip-c"><i class="am-icon-user qing-color-author" title="作者"></i> 胡建洪 &nbsp;</span>
						      <span class="qing-blog-tip-c"><i class="am-icon-clock-o qing-color-clock" title="时间"></i> 2017-02-07</span>
					        <span class="qing-blog-tip-c"><i class="am-icon-eye-slash qing-color-eye" title="阅读"></i> 阅读(<span id="blog-readNum">8</span>)</span>
					        <span class="qing-blog-tip-c"><i class="am-icon-comments-o qing-color-comment" title="评论"></i> 评论(<span id="blog-commentNum">0</span>)</span>
					        <span class="qing-blog-tip-c"><i class="am-icon-heart-o qing-color-heart" title="点赞"></i> 点赞(<span id="blog-heartNum">0</span>)</span>
				      </div>
	    		</div>
	    		<!-- blog header end -->
	    		<!-- blog summary start -->
	    		<div class="qing-margin-top"> 
        		 <p><div class="qing-blog-summary"><strong>摘要：某国有n个城市，为了使得城市间的交通更便利，该国国王打算在城市之间修一些高速公路，由于经费限制，国王打算第一阶段先在部分城市之间修一些单向的高速公路。 　　现在，大臣们帮国王拟了一个修高速公路的计划。看了计划后，国王发现，有些城市之间可以通过高速公路直接（不经过其他城市）或间接（经过一个或多个其他城市）到达，而有的却不能。如果城市A可以通过高速公路到达城市B，而且城市B也可以通过高速公路到达城市A，则这两个城市被称为便利城市对。 　　国王想知道，在大臣们给他的计划中，有多少个便利城市对。</strong></div></p> 
	    		</div>
	    		<!-- blog summary end -->
	    		<!-- blog content start -->
	    		<div class="qing-margin-top qing-blog-content" id="article-editormd-view">
	    				 <p>问题描述</p>
<p>　　某国有n个城市，为了使得城市间的交通更便利，该国国王打算在城市之间修一些高速公路，由于经费限制，国王打算第一阶段先在部分城市之间修一些单向的高速公路。<br>　　现在，大臣们帮国王拟了一个修高速公路的计划。看了计划后，国王发现，有些城市之间可以通过高速公路直接（不经过其他城市）或间接（经过一个或多个其他城市）到达，而有的却不能。如果城市A可以通过高速公路到达城市B，而且城市B也可以通过高速公路到达城市A，则这两个城市被称为便利城市对。<br>　　国王想知道，在大臣们给他的计划中，有多少个便利城市对。
<p>输入格式</p>
<p>　　输入的第一行包含两个整数n, m，分别表示城市和单向高速公路的数量。<br>　　接下来m行，每行两个整数a, b，表示城市a有一条单向的高速公路连向城市b。
<p>输出格式</p>
<p>　　输出一行，包含一个整数，表示便利城市对的数量。</p>
<p>样例输入</p>
<p>5 5<br>1 2<br>2 3<br>3 4<br>4 2<br>3 5
<p>样例输出</p>
<p>3</p>
<p>样例说明</p>
<p>　　城市间的连接如图所示。有3个便利城市对，它们分别是(2, 3), (2, 4), (3, 4)，请注意(2, 3)和(3, 2)看成同一个便利城市对。</p>
<p>评测用例规模与约定</p>
<p>　　前30%的评测用例满足1 ≤ n ≤ 100, 1 ≤ m ≤ 1000；<br>　　前60%的评测用例满足1 ≤ n ≤ 1000, 1 ≤ m ≤ 10000；<br>　　所有评测用例满足1 ≤ n ≤ 10000, 1 ≤ m ≤ 100000。
<pre><code>import java.util.Scanner;
import java.util.Stack;
import java.util.Vector;

public class Main {

    public static int MAX = 10005;

    public static Vector[] gra = new Vector[MAX];

    public static int[] dfn = new int[MAX];

    public static int[] low = new int[MAX];

    public static int[] InComponent = new int[MAX];

    public static int[] Instack = new int[MAX];

    public static Stack&lt;Integer&gt; sta = new Stack&lt;Integer&gt;();;

    public static int index = 0,ComponentNumber = 0;


    public static void tarjan(int u)  
    {  

        low[u] = dfn[u] = ++ index;  
        sta.push(u);  
        Instack[u] = 2;  
        for (int i = 0; gra[u] != null &amp;&amp; i &lt; gra[u].size(); ++ i)  
        {  
            int t = (int) gra[u].get(i);  
            if (dfn[t] == 0)  
            {  
                tarjan(t);  
                low[u] = Math.min(low[u], low[t]);  
            }   
            else if (Instack[t] == 2)  
            {  
                low[u] =  Math.min(low[u], dfn[t]);  
            }  
        }  

        if (low[u] == dfn[u])  
        {  
            ++ ComponentNumber;  
            while (!sta.empty())  
            {  
                int j = sta.pop();  
                Instack[j] = 1;  
                InComponent[j]=ComponentNumber;  
                if (j == u)  {
                   break;
                }
            }  
        }  
    }  

    public static int[] v = new int[MAX];

    public static void main(String[] args) {
        Scanner scanner = new Scanner(System.in);
        int n = scanner.nextInt();
        int m = scanner.nextInt();
        for(int i = 0; i &lt; m ;i ++){
            int h = scanner.nextInt();
            int t = scanner.nextInt();
            if(gra[h] == null){
                gra[h] = new Vector();
            }
            gra[h].add(t);
        }
        for(int i = 1;i &lt;= n; i ++){
            if(dfn[i] ==  0){
                tarjan(i);
            }
        }
        for(int i = 1; i &lt;= n; i ++){
            v[InComponent[i]] ++;
        }

        int sum = 0;

        for(int i = 1;i &lt;= n; i++){
            if(v[i] &gt; 1){
                sum += (v[i] * (v[i] - 1)) / 2;
            }
        }
        System.out.println(sum);
        scanner.close();
    }
在系统中得分90分，剩下10分运行超时未得分
</code></pre>
	    		</div>
	    		<!-- blog content end -->
	    		
	    		<div class="qing-blog-zhuanzai">
	    			转载请注明：<a href="http://www.huding.name">青菜萝卜-胡丁博客</a> » <a href="http://www.huding.name//b20170207234246.html">15年9月CCF真题4 高速公路</a>
	    		</div>
	    		
	    		<div class="qing-blog-social">
	    				<span class="qing-blog-action qing-blog-like"> 
	    					<i class="am-icon-heart"></i> 喜欢 (<span id="blog-content-like" class="count">0</span>)
	    				</span>
							<span class="or">or</span>
							<span class="qing-blog-action qing-blog-share">
								<i class="am-icon-share-alt"></i> 分享 (<span id="blog-content-share" class="bds_count" data-cmd="count" title="累计分享0次">0</span>)
								<!-- <div class="action-popover">
									<div class="popover top in">
										<div class="arrow"></div>
										<div class="popover-content">
											<a href="#" class="sinaweibo fa fa-weibo" data-cmd="tsina" title="" data-original-title="分享到新浪微博"></a>
											<a href="#" class="bds_qzone fa fa-star" data-cmd="qzone" title="" data-original-title="分享到QQ空间"></a>
											<a href="#" class="tencentweibo fa fa-tencent-weibo" data-cmd="tqq" title="" data-original-title="分享到腾讯微博"></a>
											<a href="#" class="qq fa fa-qq" data-cmd="sqq" title="" data-original-title="分享到QQ好友"></a>
											<a href="#" class="bds_renren fa fa-renren" data-cmd="renren" title="" data-original-title="分享到人人网"></a>
											<a href="#" class="bds_weixin fa fa-weixin" data-cmd="weixin" title="" data-original-title="分享到微信"></a>
											<a href="#" class="bds_more fa fa-ellipsis-h" data-cmd="more" data-original-title="" title=""></a>
										</div>
									</div>
								</div> -->
							</span>	
					</div>
	    		
	    		<div class="qing-blog-donate qing-text-center">
	    				<p>您的支持是博主写作最大的动力，如果您喜欢我的文章，感觉我的文章对您有帮助，请狠狠点击下面的</p>
	    				<input type="button" id="btn-donate" value="我要小额赞助" class="qing-btn-donate"/>
	    		</div>
	    		
	    		<!-- blog tag  start -->
    			<div class="qing-margin-top qing-blog-tag">
	            <i class="am-icon-tags"> &nbsp;</i>
<span class="am-radius">#CCF</span>	        </div>
	    		<!-- blog tag  end -->
	    	</div>
	    	<!--blog end -->
	    	
	    	<!-- blog footer start-->
    		<div class="qing-blog-foot">
    				<span class="left"><i class="am-icon-angle-double-left"></i>&nbsp;<a href="/b20170207223754.html">从零开始搭建个人博客站</a></span>
    				<span class="right"><a href="/b20161105164049.html">从零开始搭建个人博客站(三)</a>&nbsp;<i class="am-icon-angle-double-right"></i></span>
    		</div>
	    	<!-- blog footer end-->
	    	
	    	<!-- dynamic more blog start-->
				<div class="qing-margin-top">
	    		 <div class="qing-panel">
	    	  	<div class="qing-panel-title">
	    	  		<h2>相似文章</h2>
	    	  	</div>
	    	  	<div class="qing-panel-body">
	    	  		<ol class="qing-list-one" id="hot-rank-blogs"></ol>
	    	  	</div>
	    	  </div>
	    	</div>
	    	<!-- dynamic more blog end-->
    		<!-- ad start-->
    		<div id="blog-content-bottom-ad" class="qing-blog-ad qing-margin-top">
    			广告占位
    		</div>
    		<!-- ad start-->
    		<!-- comment start-->
    		<div class="qing-content qing-margin-top">
	    		<div id="commentContainer"></div>
      		<!-- 发表评论开始 -->
      		<div class="qing-comment-post">
      			发表评论
      		</div>
		      <div class="layui-form-pane qing-margin-top">
		        <form class="layui-form" action="post">
		        	<div class="layui-form-item">
						    <div class="layui-input-inline">
						      <input type="text" name="nickname" lay-verify="required" placeholder="昵称" autocomplete="off" class="layui-input">
						    </div>
						    <div class="layui-input-inline">
						      <input type="text" name="email" lay-verify="email" placeholder="邮箱" autocomplete="off" class="layui-input">
						    </div>
						  </div>
		          <div class="layui-form-item layui-form-text">
		            <div class="layui-input-block">
		              <textarea id="qing-content" name="content" required lay-verify="required" placeholder="我要发表评论"  class="layui-textarea qing-editor" style="height: 150px;"></textarea>
		            </div>
		          </div>
		          <div class="layui-form-item">
		            <input type="hidden" name="qingID" value="d8f415182fa84602a1e021a4937a22f7">
		            <button class="layui-btn" lay-filter="comment" lay-submit>提交评论</button>
		          </div>
		        </form>
		      </div>
		      <!-- 发表评论结束 -->
	    	</div>
	    	<!-- comment end-->
	    </div>
	    <!--正文内容结束-->
			<!-- 侧边栏 开始-->
	    <div class="am-u-md-4 am-u-sm-12" id="qing-left"></div>
	    <!-- 侧边栏结束-->
	</div>
	<!-- content end -->

    <footer class="qing-footer">
      <div class="qing-text-center">
        <h3>青菜萝卜简介</h3>
        <p class="am-text-sm">青菜萝卜定位为IT技术博客站，博客内容主要涉及编程语言、推荐算法、数据挖掘等方面，分享实用的学习和开发资料。 </p>
    </div>
    <div class="qing-text-center">Copyright © 2016 青菜萝卜  |  联系我 : 1043244432@qq.com  |  All Rights Reserved.  |  蜀ICP备16028381</div>    
  </footer>
	
	<script src="http://static.huding.name/js/jquery.min.js"></script>
	<script src="http://static.huding.name/js/amazeui.min.js"></script>
	<script src="static/layui/layui.js"></script>
	<script>
		layui.config({base:'static/js/'}).use('qingblog');
	</script>
	<!-- editor.md parser  -->
	<script src="http://static.huding.name/editor.md/lib/marked.min.js"></script>
	<script src="http://static.huding.name/editor.md/lib/prettify.min.js"></script>
	<!-- <script src="http://static.huding.name/editor.md/lib/raphael.min.js"></script>
	<script src="http://static.huding.name/editor.md/lib/underscore.min.js"></script> -->
<!-- 	<script src="http://static.huding.name/editor.md/lib/sequence-diagram.min.js"></script>
	<script src="http://static.huding.name/editor.md/lib/flowchart.min.js"></script>
	<script src="http://static.huding.name/editor.md/lib/jquery.flowchart.min.js"></script> -->
	<script src="http://static.huding.name/editor.md/editormd.min.js"></script>
	<script type="text/javascript">
	   $(function() {
	      var articleEditormdView;
	      articleEditormdView = editormd.markdownToHTML("article-editormd-view", {
	      	htmlDecode      : "style,script,iframe",  // you can filter tags decode
	      	/* emoji           : true, */
	      	taskList        : true,
	      	/* tex             : true,  // 默认不解析
	      	flowChart       : true,  // 默认不解析
	      	sequenceDiagram : true,  // 默认不解析 */
	      });
	   });
	</script>
	<script src="static/js/badutongji.js" ></script>
	<script src="static/js/alibaba.js"></script>
</body>
</html>